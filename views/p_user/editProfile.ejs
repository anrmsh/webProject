<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <title>Редактировать профиль</title>
    <link rel="stylesheet" href="/css/profile.css" />
    <link rel="stylesheet" href="/css/editProfile.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
  </head>
  <body>
    <main>
      <h2>Редактировать профиль</h2>

      <% if (client) { %>
      <form id="editProfileForm">
        <label
          >Имя:
          <input
            type="text"
            name="first_name"
            value="<%= client.user.first_name %>"
          />
        </label>

        <label
          >Фамилия:
          <input
            type="text"
            name="last_name"
            value="<%= client.user.last_name %>"
          />
        </label>

        <label
          >Логин:
          <input type="text" name="login" value="<%= client.user.login %>" />
        </label>

        <label
          >Пароль:
          <input
            type="password"
            placeholder="********"
            readonly
            id="passwordField"
          />
          <button type="button" id="changePasswordBtn">Изменить пароль</button>
        </label>

        <label
          >Телефон:
          <input type="text" name="phone" value="<%= client.phone %>" />
        </label>

        <label
          >Тип клиента:
          <input
            type="text"
            value="<%= client.client_type === 'individual' ? 'Физическое лицо' : 'Юридическое лицо' %>"
            readonly
          />
        </label>

        <button type="button" id="saveBtn">Сохранить</button>
      </form>
      <% } else { %>
      <p>Клиент не найден</p>
      <% } %>
    </main>

    <!-- Модальное окно подтверждения -->
    <div id="confirmModal" class="modal">
      <div class="modal-content">
        <p>Вы уверены, что хотите сохранить изменения?</p>
        <button id="confirmYes">Да</button>
        <button id="confirmNo">Нет</button>
      </div>
    </div>

    <!-- Модальное окно смены пароля -->
    <div id="passwordModal" class="modal">
      <div class="modal-content">
        <h4>Сменить пароль</h4>
        <label>Старый пароль:</label>
        <input type="password" id="oldPassword" />
        <label>Новый пароль:</label>
        <input type="password" id="newPassword" />
        <div style="margin-top: 10px">
          <button id="passwordSaveBtn">Сохранить</button>
          <button id="passwordCancelBtn">Отмена</button>
        </div>
      </div>
    </div>

    <script src="/script/editProfileScript.js"></script>
  </body>
</html>
